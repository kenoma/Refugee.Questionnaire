## Телеграмм бот для анкетирования

### Желающим присоединиться к разработке

Присоединяйтесь к группе [Телеграмма](https://t.me/+k349Hrrf4-0wMTli)

Статистика работы бота [на сайте](https://help-refugees.ru/stats/)

### Общее

При создании бота рекомендуется запретить его добавление в группы и не включать инлайн для глобальной видимости.

### Обязательные параметры для запуска

|Параметр| Значение                                      | Пример                                    |
|-------|-----------------------------------------------|-------------------------------------------|
|apiBaseUrl| Адрес по которому располагается api црм       | https://crm.help-refugees.ru |
|clientId| Идентификатор клиента црм                     | IAmClientId                               |
|clientSecret| Секрет, выданный админом црм                  | 12354zZ                                   |
|configId| Идентификатор конфигурации, применимой к боту | 123-123-123-123                           |

### Опциональные параметры для запуска

Параметры, передаваемые через командную строку, имеют более низкий приоритет, чем через апи.
Имеет смысл передавать только dbPath и botToken если они по какой то причине не отдаются бэком.

|Параметр| Значение                                                                                      | Пример                 |
|-------|-----------------------------------------------------------------------------------------------|------------------------|
|urls | Урлы, по которому доступен API                                                                | "http://localhost:9002" |
|dbPath | Путь, к папке, где хранятся данные бота                                                       | tmp                    |
|botToken | Токен, выдаваемый BotFather                                                                   |                        |
|adminID| Id пользователей через запятую, которые станут администраторами                               | `12345,345345, 123452`   |

Пример запуска под windows:

```
RQ.Bot.exe --apiBaseUrl=https://crm.help-refugees.ru --clientId=HelpRefugees_Bot --clientSecret=123qwe --configId=1111111-2222-3333-4444-1234124124 
```

### API

Все запросы к API требуют заголовка `X-Volunteer-Token`, с токеном, который выдается только админам самим ботом.

### Администраторы

Администратором могут получить только пользователи, указанные в `adminID`.
